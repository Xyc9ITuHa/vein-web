import{j as C,r as a}from"./index-Dn5u9AjM.js";import{u as M}from"./useIntersection-BAq-0zBM.js";const L=(t,l)=>{let s=null,n=0;return(...i)=>{const c=Date.now();c-n>l?(t(...i),n=c):(s&&clearTimeout(s),s=setTimeout(()=>{t(...i),n=Date.now()},l-(c-n)))}},T=(t=20)=>{const[l,s]=a.useState({x:0,y:0}),[n,i]=a.useState({rotateX:0,rotateY:0}),[c,m]=a.useState(!1),u=a.useRef(null),f=a.useCallback(L(e=>{if(!u.current)return;const r=u.current.getBoundingClientRect(),v=r.left+r.width/2,x=r.top+r.height/2,h=e.clientX-v,p=e.clientY-x,E=Math.max(-45,Math.min(45,h/r.width*t)),g=Math.max(-45,Math.min(45,-(p/r.height)*t));s({x:h,y:p}),i({rotateX:g,rotateY:E})},16),[t]),d=a.useCallback(()=>{m(!0)},[]),o=a.useCallback(()=>{m(!1),i({rotateX:0,rotateY:0}),s({x:0,y:0})},[]);return a.useEffect(()=>{const e=u.current;if(e)return e.addEventListener("mousemove",f),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",o),()=>{e.removeEventListener("mousemove",f),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",o)}},[f,d,o]),{elementRef:u,position:l,rotation:n,isTracking:c}},$=({children:t,className:l="",sensitivity:s=15,disabled:n=!1,perspective:i=1e3,transitionDuration:c=300})=>{const{elementRef:m,rotation:u,isTracking:f}=T(s),d=M(m,"100px"),o=!n&&d,e=`relative transform-gpu ${l}`,r=o?`transition-transform duration-${c} ease-out`:"",v=o?`perspective(${i}px) rotateX(${u.rotateX}deg) rotateY(${u.rotateY}deg)`:"none";return C.jsx("div",{ref:m,className:`${e} ${r}`.trim(),style:{transform:v,transformStyle:o?"preserve-3d":"flat",willChange:f?"transform":"auto"},"data-3d-active":o,children:t})};export{$ as default};
